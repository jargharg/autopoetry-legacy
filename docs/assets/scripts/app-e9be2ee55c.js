!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=i(n(1)),a=i(n(2)),r=i(n(7)),s=(new o.default,new a.default);new r.default(s)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.topNav=$(".top-nav"),this.events()}return o(e,[{key:"events",value:function(){this.topNav.click(this.infoToggle.bind(this))}},{key:"infoToggle",value:function(e){$(".top-nav__details").toggleClass("top-nav__details--expanded"),e.stopPropagation(),$(document).click(function(){$(".top-nav__details").removeClass("top-nav__details--expanded"),$(document).off()})}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(3)),u=i(n(4)),l=i(n(5)),c=i(n(6)),h=function(){function e(){a(this,e),this.currentPoemData={},this.gUrl="https://content.guardianapis.com/search?show-fields=body&q=",this.gKey="&api-key=2c7e590d-dde8-498a-b351-b008c42edf52",this.poemBody=$(".poem-body"),this.poemControls=new u.default(this),this.shareLinks=new s.default,this.poemMethods=new l.default}return r(e,[{key:"createPoem",value:function(e){var t=this;this.poemBody.empty(),this.poemMethods.newPoem(e).forEach(function(n,i){return new c.default(t.poemBody,n.content,n.index,e)}),this.poemControls.newPoem(e),this.shareLinks.newPoem()}},{key:"shuffle",value:function(e){for(var t,n,i=e.length;i;)n=Math.floor(Math.random()*i--),t=e[i],e[i]=e[n],e[n]=t;return e}},{key:"parseData",value:function(e,t){var n=[];e.response.results.map(function(e){return e.fields.body}).join(" ").replace(/<br>/g,".").replace(/<(?:.|\n)*?>/gm,"").replace(/\&apos|’/g,"'").replace(/\&amp/g," and ").replace(/\u201C|\u201D|!|\(|\)|\[|\]|;|:|\"|\/|,|\.com|\&quot|\.|\?|–|\u2013 |\&|\u2022|\||@|\d{3,}/g,".").split(".").forEach(function(e){(e=e.trim()).length>2&&"Photograph"!=e&&"'*"!=e&&(e.length>70?(e=e.replace(/.{50}\S*\s+/g,"$&@").split(/\s+@/),n.push.apply(n,o(e))):n.push(e))});var i=n.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),a=this.shuffle(i);this.currentPoemData={title:t,content:a},this.createPoem(this.currentPoemData)}},{key:"newPoem",value:function(e){var t=this;$("h1").text(e),$("ul").html("<div class='loading-div'>Loading<span>.</span><span>.</span><span>.</span></div>");var n=(e=e.replace(/\?/g,"")).replace(/ /g," AND ");$.getJSON(t.gUrl+n+t.gKey,function(i){Number(i.response.total)>0?t.parseData(i,e):(n=n.replace(/ AND /g," OR "),$.getJSON(t.gUrl+n+t.gKey,function(n){Number(n.response.total)>0?t.parseData(n,e):$(".loading-div").html("No results, try again x")}))})}}]),e}();t.default=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.shareLink=$(".poem-links--share i"),this.poemContents={},this.poemTitle={},this.events()}return o(e,[{key:"events",value:function(){this.shareLink.click(this.sendWhatsAppPoem.bind(this))}},{key:"newPoem",value:function(){this.poemContents=$(".poem-line--text"),this.poemTitle=$(".poem-title h1").text().toUpperCase()}},{key:"whatsAppPoemLink",value:function(){var e=this.poemTitle+"\n\n";return this.poemContents.each(function(){e+=this.textContent+"\n"}),"whatsapp://send?text="+encodeURI(e+"\nMake your own autopoem at jarodhargreav.es/autopoetry")}},{key:"sendWhatsAppPoem",value:function(){var e=this;this.shareLink.parent().attr("href",e.whatsAppPoemLink())}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.poem=t,this.poemData={},this.poemEdit=$("#poemEdit"),this.poemEditIcon=$("#poemEdit .material-icons"),this.poemContainer=$(".poem-container"),this.poemLinesRefresh=$(),this.wholePoemRefresh=$("#wholePoemRefresh"),this.editModeActive=!1,this.events()}return o(e,[{key:"events",value:function(){this.poemEdit.click(this.editMode.bind(this)),this.wholePoemRefresh.click(this.refreshPoem.bind(this))}},{key:"newPoem",value:function(e){this.poemData=e}},{key:"editMode",value:function(){!0===this.editModeActive?(this.poemEditIcon.text("mode_edit"),this.poemContainer.removeClass("edit-mode"),this.editModeActive=!1):(this.poemEditIcon.text("done"),this.poemContainer.addClass("edit-mode"),this.editModeActive=!0)}},{key:"refreshPoem",value:function(){this.editMode(),this.poem.createPoem(this.poemData)}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.methods=[this.randomPoem,this.ifOrPoem],this.randomLineIndex=this.randomLineIndex.bind(this)}return o(e,[{key:"newPoem",value:function(e){return this.length=3+Math.floor(10*Math.random()),this.title=e.title,this.content=e.content,this.randomPoem.call(this)}},{key:"randomLineIndex",value:function(){return Math.floor(Math.random()*this.content.length)}},{key:"randomPoem",value:function(){for(var e=this,t=[],n=0;n<this.length;n++)t.push(this.randomLineIndex());return t.map(function(t){var n={};return n.index=t,n.content=e.content[t],n})}},{key:"ifOrPoem",value:function(){var e=[],t=[],n=[],i=[];this.content.forEach(function(i){/if /i.test(i.substring(0,3))?e.push(i):/or /i.test(i.substring(0,3))?t.push(i):/then /i.test(i.substring(0,5))&&n.push(i)});var o=Math.min(e.length,t.length);Math.floor(Math.random()*o);return i.push(e[Math.floor(Math.random()*e.length)],t[Math.floor(Math.random()*t.length)]),0!==n.length?i.push(n[Math.floor(Math.random()*n.length)]):i.push(this.content[this.randomLineIndex()]),i}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,o,a){i(this,e),this.body=t,this.line=n,this.index=o,this.data=a.content,this.addToBody(),this.events()}return o(e,[{key:"events",value:function(){var e=this;this.DOMnext.click(function(){return e.changeLine("next")}),this.DOMprev.click(function(){return e.changeLine("prev")}),this.DOMlineContainer.keydown(function(t){switch(t.which){case 37:e.changeLine("prev");break;case 38:$(e.DOMlineContainer).prev().focus();break;case 39:e.changeLine("next");break;case 40:$(e.DOMlineContainer).next().focus()}})}},{key:"addToBody",value:function(){this.DOMlineContainer=$("<li tabindex=0 class='poem-line'>"),this.DOMline=$("<span class='poem-line--text'>").text(this.line),this.DOMnext=$("<div class='poem-line__nav poem-line__nav__next'>").html("<i class='material-icons md-18'>navigate_next</i>"),this.DOMprev=$("<div class='poem-line__nav poem-line__nav__prev'>").html("<i class='material-icons md-18'>navigate_before</i>"),this.body.append(this.DOMlineContainer.append(this.DOMline).append(this.DOMnext).append(this.DOMprev))}},{key:"changeLine",value:function(e){if($(".edit-mode").length>0){"next"===e?this.data[this.index+1]?this.index++:this.index=0:this.index>0?this.index--:this.index=this.data.length-1;var t=this.data[this.index];$(this.DOMline).text(t)}}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.poem=t,this.inputButton=$("#inputSubmit"),this.inputText=$("#inputText"),this.events(this.firstWordSearch),this.inputText.focus()}return o(e,[{key:"events",value:function(e){var t=this;this.inputButton.off().click(e.bind(this)),this.inputText.off().keypress(function(n){return 13==n.which?e.call(t):null})}},{key:"newWordSearch",value:function(){""!=this.inputText.val()?(this.poem.newPoem(this.inputText.val()),this.inputText.val("").removeClass("input-mobile").parent().removeClass("poem-form__expanded"),this.inputButton.blur(),$(".edit-mode").removeClass("edit-mode"),$("#poemEdit .material-icons").text("mode_edit")):this.inputText.addClass("input-mobile").focus().parent().addClass("poem-form__expanded")}},{key:"firstWordSearch",value:function(){""!=this.inputText.val()?($(".container").removeClass("hidden"),$(".app-name").addClass("hidden"),$(".poem-form").removeClass("poem-form__init").addClass("poem-form__bottom"),$(".top-nav__name").removeClass("hidden"),this.events(this.newWordSearch),this.newWordSearch()):this.inputText.focus()}}]),e}();t.default=a}]);