!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=i(n(1)),r=i(n(2)),a=i(n(5)),s=(new o.default,new r.default);new a.default(s)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.topNav=$(".topNav"),this.events()}return o(e,[{key:"events",value:function(){this.topNav.click(this.infoToggle.bind(this))}},{key:"infoToggle",value:function(e){$(".appDetails").toggleClass("visible"),e.stopPropagation(),$(document).click(function(){$(".appDetails").removeClass("visible"),$(document).off()})}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=i(n(3)),u=i(n(4)),l=function(){function e(){r(this,e),this.currentPoemData={},this.gUrl="https://content.guardianapis.com/search?show-fields=body&q=",this.gKey="&api-key=2c7e590d-dde8-498a-b351-b008c42edf52",this.poemBody=$(".poemBody"),this.poemControls=new u.default(this),this.shareLinks=new s.default}return a(e,[{key:"createPoem",value:function(e){var t=this,n=[];this.poemBody.empty();for(var i=0;i<10;i++)n.push(Math.floor(Math.random()*e.content.length));n.forEach(function(n){t.poemBody.append($("<li class='poemLine'>").append($("<span class='poemLineText'>").html(e.content[n])).append($("<div class='poemLineRefresh'>").html("<i class='material-icons md-18'>&#xE86A;</i>")))}),this.poemControls.newPoem(e),this.shareLinks.newPoem(),$(".articleLink").attr("href",e.link)}},{key:"parseData",value:function(e,t){var n=e.response.results,i=Math.floor(Math.random()*n.length),r=n[i].fields.body,a=n[i].webUrl,s=[];r.replace(/<br>/g,".").replace(/<(?:.|\n)*?>/gm,"").replace(/\&apos|’/g,"'").replace(/\&amp/g," and ").replace(/\u201C|\u201D|!|\(|\)|\[|\]|;|:|\"|\/|,|\.com|\&quot|\.|\?|–|\u2013 |\&|\u2022|\||@|\d{3,}/g,".").split(".").forEach(function(e){if((e=e.trim()).length>2&&"Photograph"!=e&&"'*"!=e)if(e.length>80){var t;e=e.replace(/.{60}\S*\s+/g,"$&@").split(/\s+@/),(t=s).push.apply(t,o(e))}else s.push(e)}),s=s.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),this.currentPoemData={title:t,link:a,content:s},this.createPoem(this.currentPoemData)}},{key:"newPoem",value:function(e){var t=this;$("h1").text(e),$("ul").empty().append("<div class='loadingDiv'>Loading<span>.</span><span>.</span><span>.</span></div>");var n=(e=e.replace(/\?/g,"")).replace(/ /g," AND ");$.getJSON(t.gUrl+n+t.gKey,function(i){Number(i.response.total)>0?t.parseData(i,e):(n=n.replace(/ AND /g," OR "),$.getJSON(t.gUrl+n+t.gKey,function(n){Number(n.response.total)>0?t.parseData(n,e):$(".loadingDiv").html("No results, try again x")}))})}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.shareLink=$(".shareLink i"),this.poemContents={},this.poemTitle={},this.events()}return o(e,[{key:"events",value:function(){this.shareLink.click(this.sendWhatsAppPoem.bind(this))}},{key:"newPoem",value:function(){this.poemContents=$(".poemLineText"),this.poemTitle=$("#poemTitle h1").text().toUpperCase()}},{key:"whatsAppPoemLink",value:function(){var e=this.poemTitle+"\n\n";return this.poemContents.each(function(){e+=this.textContent+"\n"}),"whatsapp://send?text="+encodeURI(e+"\nMake your own autopoem at jarodhargreav.es/autopoetry")}},{key:"sendWhatsAppPoem",value:function(){var e=this;this.shareLink.parent().attr("href",e.whatsAppPoemLink())}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.poem=t,this.poemData={},this.poemEdit=$("#poemEdit"),this.poemEditIcon=$("#poemEdit .material-icons"),this.poemContainer=$("#poemContainer"),this.poemLinesRefresh=$(),this.wholePoemRefresh=$("#wholePoemRefresh"),this.editModeActive=!1,this.events()}return o(e,[{key:"events",value:function(){this.poemEdit.click(this.editMode.bind(this)),this.wholePoemRefresh.click(this.refreshPoem.bind(this))}},{key:"newPoem",value:function(e){var t=this;this.poemData=e,this.poemLinesRefresh=$(".poemLineRefresh"),this.poemLinesRefresh.off().click(function(){t.refreshLine(this)})}},{key:"editMode",value:function(){!0===this.editModeActive?(this.poemEditIcon.text("mode_edit"),this.poemContainer.removeClass("editMode"),this.editModeActive=!1):(this.poemEditIcon.text("done"),this.poemContainer.addClass("editMode"),this.editModeActive=!0)}},{key:"refreshLine",value:function(e){var t=this.poemData.content[Math.floor(Math.random()*this.poemData.content.length)];$(e).prev().text(t)}},{key:"refreshPoem",value:function(){this.editMode(),this.poem.newPoem(this.poemData.title)}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.poem=t,this.inputButton=$("#inputSubmit"),this.inputText=$("#inputText"),this.events(this.firstWordSearch),this.inputText.focus()}return o(e,[{key:"events",value:function(e){var t=this;this.inputButton.off().click(e.bind(this)),this.inputText.off().keypress(function(n){return 13==n.which?e.call(t):null})}},{key:"newWordSearch",value:function(){""!=this.inputText.val()?(this.poem.newPoem(this.inputText.val()),this.inputText.val("").removeClass("inputMobile").parent().removeClass("poemFormExpanded"),this.inputButton.blur(),$(".editMode").removeClass("editMode"),$("#poemEdit .material-icons").text("mode_edit")):this.inputText.addClass("inputMobile").focus().parent().addClass("poemFormExpanded")}},{key:"firstWordSearch",value:function(){""!=this.inputText.val()?($(".container").removeClass("hidden"),$(".topNav").removeClass("hidden"),$(".appNameInit").addClass("hidden"),$(".poemForm").removeClass("poemFormInit").addClass("poemFormBottom"),this.events(this.newWordSearch),this.newWordSearch()):this.inputText.focus()}}]),e}();t.default=r}]);