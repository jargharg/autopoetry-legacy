!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n(1)),r=o(n(2)),a=o(n(6)),s=(new i.default,new r.default);new a.default(s)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.topNav=$(".top-nav"),this.events()}return i(e,[{key:"events",value:function(){this.topNav.click(this.infoToggle.bind(this))}},{key:"infoToggle",value:function(e){$(".top-nav--details").toggleClass("top-nav--details__expanded"),e.stopPropagation(),$(document).click(function(){$(".top-nav--details").removeClass("top-nav--details__expanded"),$(document).off()})}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=o(n(3)),u=o(n(4)),l=o(n(5)),c=function(){function e(){r(this,e),this.currentPoemData={},this.gUrl="https://content.guardianapis.com/search?show-fields=body&q=",this.gKey="&api-key=2c7e590d-dde8-498a-b351-b008c42edf52",this.poemBody=$(".poem-body"),this.poemControls=new u.default(this),this.shareLinks=new s.default,this.poemMethods=new l.default}return a(e,[{key:"createPoem",value:function(e){var t=this;this.poemBody.empty(),this.poemMethods.newPoem(e).forEach(function(e){t.poemBody.append($("<li class='poem-line'>").append($("<span class='poem-line--text'>").html(e)).append($("<div class='poem-line--refresh'>").html("<i class='material-icons md-18'>&#xE86A;</i>")))}),this.poemControls.newPoem(e),this.shareLinks.newPoem()}},{key:"parseData",value:function(e,t){var n=[];e.response.results.map(function(e){return e.fields.body}).join(" ").replace(/<br>/g,".").replace(/<(?:.|\n)*?>/gm,"").replace(/\&apos|’/g,"'").replace(/\&amp/g," and ").replace(/\u201C|\u201D|!|\(|\)|\[|\]|;|:|\"|\/|,|\.com|\&quot|\.|\?|–|\u2013 |\&|\u2022|\||@|\d{3,}/g,".").split(".").forEach(function(e){(e=e.trim()).length>2&&"Photograph"!=e&&"'*"!=e&&(e.length>70?(e=e.replace(/.{50}\S*\s+/g,"$&@").split(/\s+@/),n.push.apply(n,i(e))):n.push(e))});var o=n.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)});this.currentPoemData={title:t,content:o},this.createPoem(this.currentPoemData)}},{key:"newPoem",value:function(e){var t=this;$("h1").text(e),$("ul").html("<div class='loading-div'>Loading<span>.</span><span>.</span><span>.</span></div>");var n=(e=e.replace(/\?/g,"")).replace(/ /g," AND ");$.getJSON(t.gUrl+n+t.gKey,function(o){Number(o.response.total)>0?t.parseData(o,e):(n=n.replace(/ AND /g," OR "),$.getJSON(t.gUrl+n+t.gKey,function(n){Number(n.response.total)>0?t.parseData(n,e):$(".loading-div").html("No results, try again x")}))})}}]),e}();t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.shareLink=$(".poem-links--share i"),this.poemContents={},this.poemTitle={},this.events()}return i(e,[{key:"events",value:function(){this.shareLink.click(this.sendWhatsAppPoem.bind(this))}},{key:"newPoem",value:function(){this.poemContents=$(".poem-line--text"),this.poemTitle=$(".poem-title h1").text().toUpperCase()}},{key:"whatsAppPoemLink",value:function(){var e=this.poemTitle+"\n\n";return this.poemContents.each(function(){e+=this.textContent+"\n"}),"whatsapp://send?text="+encodeURI(e+"\nMake your own autopoem at jarodhargreav.es/autopoetry")}},{key:"sendWhatsAppPoem",value:function(){var e=this;this.shareLink.parent().attr("href",e.whatsAppPoemLink())}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){o(this,e),this.poem=t,this.poemData={},this.poemEdit=$("#poemEdit"),this.poemEditIcon=$("#poemEdit .material-icons"),this.poemContainer=$(".poem-container"),this.poemLinesRefresh=$(),this.wholePoemRefresh=$("#wholePoemRefresh"),this.editModeActive=!1,this.events()}return i(e,[{key:"events",value:function(){this.poemEdit.click(this.editMode.bind(this)),this.wholePoemRefresh.click(this.refreshPoem.bind(this))}},{key:"newPoem",value:function(e){var t=this;this.poemData=e,this.poemLinesRefresh=$(".poem-line--refresh"),this.poemLinesRefresh.off().click(function(){t.refreshLine(this)})}},{key:"editMode",value:function(){!0===this.editModeActive?(this.poemEditIcon.text("mode_edit"),this.poemContainer.removeClass("edit-mode"),this.editModeActive=!1):(this.poemEditIcon.text("done"),this.poemContainer.addClass("edit-mode"),this.editModeActive=!0)}},{key:"refreshLine",value:function(e){var t=this.poemData.content[Math.floor(Math.random()*this.poemData.content.length)];$(e).prev().text(t)}},{key:"refreshPoem",value:function(){this.editMode(),this.poem.createPoem(this.poemData)}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.methods=[this.randomPoem,this.ifOrPoem],this.randomLineIndex=this.randomLineIndex.bind(this)}return i(e,[{key:"newPoem",value:function(e){return this.length=3+Math.floor(10*Math.random()),this.title=e.title,this.content=e.content,this.randomPoem.call(this)}},{key:"randomLineIndex",value:function(){return Math.floor(Math.random()*this.content.length)}},{key:"randomPoem",value:function(){for(var e=this,t=[],n=0;n<this.length;n++)t.push(this.randomLineIndex());return t.map(function(t){return e.content[t]})}},{key:"ifOrPoem",value:function(){var e=[],t=[],n=[],o=[];this.content.forEach(function(o){/if /i.test(o.substring(0,3))?e.push(o):/or /i.test(o.substring(0,3))?t.push(o):/then /i.test(o.substring(0,5))&&n.push(o)});var i=Math.min(e.length,t.length);Math.floor(Math.random()*i);return o.push(e[Math.floor(Math.random()*e.length)],t[Math.floor(Math.random()*t.length)]),0!==n.length?o.push(n[Math.floor(Math.random()*n.length)]):o.push(this.content[this.randomLineIndex()]),o}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){o(this,e),this.poem=t,this.inputButton=$("#inputSubmit"),this.inputText=$("#inputText"),this.events(this.firstWordSearch),this.inputText.focus()}return i(e,[{key:"events",value:function(e){var t=this;this.inputButton.off().click(e.bind(this)),this.inputText.off().keypress(function(n){return 13==n.which?e.call(t):null})}},{key:"newWordSearch",value:function(){""!=this.inputText.val()?(this.poem.newPoem(this.inputText.val()),this.inputText.val("").removeClass("input-mobile").parent().removeClass("poem-form__expanded"),this.inputButton.blur(),$(".edit-mode").removeClass("edit-mode"),$("#poemEdit .material-icons").text("mode_edit")):this.inputText.addClass("input-mobile").focus().parent().addClass("poem-form__expanded")}},{key:"firstWordSearch",value:function(){""!=this.inputText.val()?($(".container").removeClass("hidden"),$(".top-nav").removeClass("hidden"),$(".app-name__init").addClass("hidden"),$(".poem-form").removeClass("poem-form__init").addClass("poem-form__bottom"),this.events(this.newWordSearch),this.newWordSearch()):this.inputText.focus()}}]),e}();t.default=r}]);